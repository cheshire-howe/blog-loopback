!function(){"use strict";function a(a,b){function c(){a.isCollapsed=!0}function d(){b.findAll().$promise.then(function(a){e.posts=a.posts})}var e=this;e.userId=a.utils.getCurrentUser(),e.posts=[],e.collapse=c,d()}function b(a,b,c){function d(){e.newPost.userId=e.userId,c.create(e.newPost).$promise.then(function(){e.postForm.$setPristine(),b.go("blog")})}var e=this;e.userId=a.utils.getCurrentUser(),e.addPost=d,e.newPost=e.newPost||{}}function c(a,b,c,d,e){function f(){d.findSingle({id:b.id}).$promise.then(function(a){h.post=a.post})}function g(){d.comments.destroyAll({id:h.post.id}).$promise.then(function(){e.posts.destroyById({id:h.userId,fk:h.post.id}).$promise.then(function(){c.go("blog")})})}c.transitionTo("postDetail.comments",b);var h=this;h.userId=a.utils.getCurrentUser(),h.post={},h.deletePost=g,f()}function d(a,b,c,d,e,f){function g(){e.findSingle({id:c.id}).$promise.then(function(a){i.newPost=a.post})}function h(a){f.posts.updateById({id:i.userId,fk:c.id},{title:a.title,content:a.content}).$promise.then(function(){d.go("postDetail",{id:c.id})})}var i=this;i.userId=a.utils.getCurrentUser(),i.newPost={},i.editPost=h,g()}angular.module("blogApp.controllers.postCtrls",["lbServices"]).controller("PostCtrl",a).controller("PostCreateCtrl",b).controller("PostDetailCtrl",c).controller("PostEditCtrl",d),a.$inject=["$rootScope","Post","User"],b.$inject=["$rootScope","$state","Post","User"],c.$inject=["$rootScope","$stateParams","$state","Post","User"],d.$inject=["$rootScope","$scope","$stateParams","$state","Post","User"]}();