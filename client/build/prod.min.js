!function(){"use strict";function a(a,b,c,d){function e(){return b.comments({id:a.id})}function f(){b.comments.create({id:a.id},{content:i.newComment.content,userId:i.userId}).$promise.then(function(a){i.newComment="",i.commentForm.$setPristine(),i.comments.push(a)})}function g(a,b,e){d.comments.updateById({fk:b,id:i.userId},{content:a}).$promise.then(function(){},function(){i.comments[e]=c.findById({id:b})})}function h(a,b){d.comments.destroyById({fk:a,id:i.userId}).$promise.then(function(){i.comments.splice(b,1)})}var i=this;i.userId=localStorage.getItem("$LoopBack$currentUserId"),i.comments=e(),i.addComment=f,i.editComment=g,i.deleteComment=h}angular.module("blogApp.controllers.commentCtrls",["lbServices"]).controller("CommentCtrl",a),a.$inject=["$stateParams","Post","Comment","User"]}(),function(){"use strict";function a(a,b){function c(){a.isCollapsed=!0}function d(){b.findAll().$promise.then(function(a){e.posts=a.posts})}var e=this;e.userId=a.utils.getCurrentUser(),e.posts=[],e.collapse=c,d()}function b(a,b,c){function d(){e.newPost.userId=e.userId,c.create(e.newPost).$promise.then(function(){e.postForm.$setPristine(),b.go("blog")})}var e=this;e.userId=a.utils.getCurrentUser(),e.addPost=d,e.newPost=e.newPost||{}}function c(a,b,c,d,e){function f(){d.findSingle({id:b.id}).$promise.then(function(a){h.post=a.post})}function g(){d.comments.destroyAll({id:h.post.id}).$promise.then(function(){e.posts.destroyById({id:h.userId,fk:h.post.id}).$promise.then(function(){c.go("blog")})})}c.transitionTo("postDetail.comments",b);var h=this;h.userId=a.utils.getCurrentUser(),h.post={},h.deletePost=g,f()}function d(a,b,c,d,e,f){function g(){e.findSingle({id:c.id}).$promise.then(function(a){i.newPost=a.post})}function h(a){f.posts.updateById({id:i.userId,fk:c.id},{title:a.title,content:a.content}).$promise.then(function(){d.go("postDetail",{id:c.id})})}var i=this;i.userId=a.utils.getCurrentUser(),i.newPost={},i.editPost=h,g()}angular.module("blogApp.controllers.postCtrls",["lbServices"]).controller("PostCtrl",a).controller("PostCreateCtrl",b).controller("PostDetailCtrl",c).controller("PostEditCtrl",d),a.$inject=["$rootScope","Post","User"],b.$inject=["$rootScope","$state","Post","User"],c.$inject=["$rootScope","$stateParams","$state","Post","User"],d.$inject=["$rootScope","$scope","$stateParams","$state","Post","User"]}(),function(){"use strict";function a(a,b,c){function d(){var a={username:e.newUser.username,email:e.newUser.email,password:e.newUser.password};c.create(a).$promise.then(function(){c.login(a,function(){b.go("blog")})},function(a){console.log(a),e.error=a.data.error.message})}var e=this;e.userId=a.utils.getCurrentUser(),e.newUser={},e.error="",e.register=d}function b(a,b,c){function d(){c.login({email:e.user.email,password:e.user.password}).$promise.then(function(){e.loginFail=!1,b.go("blog")},function(){e.loginFail=!0})}var e=this;e.userId=a.utils.getCurrentUser(),e.user={},e.loginFail=!1,e.login=d}function c(a,b){b.logout().$promise.then(function(){a.go("blog")})}angular.module("blogApp.controllers.userCtrls",["lbServices"]).controller("UserRegisterCtrl",a).controller("UserLoginCtrl",b).controller("UserLogoutCtrl",c),a.$inject=["$rootScope","$state","User"],b.$inject=["$rootScope","$state","User"],c.$inject=["$state","User"]}(),function(){"use strict";function a(a,b,c){b.theme="bs3",a.utils=c}angular.module("blogApp.core.config",["xeditable"]).run(a),a.$inject=["$rootScope","editableOptions","helpers"]}(),function(){"use strict";function a(a,b,c){a.state("blog",{url:"/",templateUrl:"js/blog/templates/posts.html",controller:"PostCtrl",controllerAs:"Posts"}).state("postCreate",{url:"/Post/create",templateUrl:"js/blog/templates/create.html",controller:"PostCreateCtrl",controllerAs:"PostCreate"}).state("postDetail",{url:"/Post/:id",templateUrl:"js/blog/templates/detail.html",controller:"PostDetailCtrl",controllerAs:"PostDetail"}).state("postDetail.comments",{templateUrl:"js/blog/templates/partials/comments.html",controller:"CommentCtrl",controllerAs:"Comments"}).state("postEdit",{url:"/Post/:id/edit",templateUrl:"js/blog/templates/edit.html",controller:"PostEditCtrl",controllerAs:"PostEdit"}).state("register",{url:"/userRegister",templateUrl:"js/users/templates/register.html",controller:"UserRegisterCtrl",controllerAs:"Register"}).state("login",{url:"/userLogin",templateUrl:"js/users/templates/login.html",controller:"UserLoginCtrl",controllerAs:"Login"}).state("logout",{url:"/userLogout",controller:"UserLogoutCtrl"}),b.otherwise("/"),c.html5Mode(!0)}angular.module("blogApp.core.routes",["ui.router"]).config(a),a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(),function(){"use strict";angular.module("blogApp.directives",[]).directive("compareTo",[function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b===a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}}]).directive("ngReallyClick",[function(){return{restrict:"A",link:function(a,b,c){b.bind("click",function(){var b=c.ngReallyMessage;b&&confirm(b)&&a.$apply(c.ngReallyClick)})}}}])}(),function(a,b,c){"use strict";var d="/api",e="authorization",f=b.module("lbServices",["ngResource"]);f.factory("Post",["LoopBackResource","LoopBackAuth","$injector",function(a,b,c){var e=a(d+"/Posts/:id",{id:"@id"},{prototype$__findById__comments:{url:d+"/Posts/:id/comments/:fk",method:"GET"},prototype$__destroyById__comments:{url:d+"/Posts/:id/comments/:fk",method:"DELETE"},prototype$__updateById__comments:{url:d+"/Posts/:id/comments/:fk",method:"PUT"},prototype$__get__user:{url:d+"/Posts/:id/user",method:"GET"},prototype$__get__comments:{isArray:!0,url:d+"/Posts/:id/comments",method:"GET"},prototype$__create__comments:{url:d+"/Posts/:id/comments",method:"POST"},prototype$__delete__comments:{url:d+"/Posts/:id/comments",method:"DELETE"},prototype$__count__comments:{url:d+"/Posts/:id/comments/count",method:"GET"},create:{url:d+"/Posts",method:"POST"},upsert:{url:d+"/Posts",method:"PUT"},exists:{url:d+"/Posts/:id/exists",method:"GET"},findById:{url:d+"/Posts/:id",method:"GET"},find:{isArray:!0,url:d+"/Posts",method:"GET"},findOne:{url:d+"/Posts/findOne",method:"GET"},updateAll:{url:d+"/Posts/update",method:"POST"},deleteById:{url:d+"/Posts/:id",method:"DELETE"},count:{url:d+"/Posts/count",method:"GET"},prototype$updateAttributes:{url:d+"/Posts/:id",method:"PUT"},findAll:{url:d+"/Posts/findAll",method:"GET"},findSingle:{url:d+"/Posts/:id/findSingle",method:"GET"},"::get::Comment::post":{url:d+"/Comments/:id/post",method:"GET"},"::findById::user::posts":{url:d+"/users/:id/posts/:fk",method:"GET"},"::destroyById::user::posts":{url:d+"/users/:id/posts/:fk",method:"DELETE"},"::updateById::user::posts":{url:d+"/users/:id/posts/:fk",method:"PUT"},"::get::user::posts":{isArray:!0,url:d+"/users/:id/posts",method:"GET"},"::create::user::posts":{url:d+"/users/:id/posts",method:"POST"},"::delete::user::posts":{url:d+"/users/:id/posts",method:"DELETE"},"::count::user::posts":{url:d+"/users/:id/posts/count",method:"GET"}});return e.updateOrCreate=e.upsert,e.update=e.updateAll,e.destroyById=e.deleteById,e.removeById=e.deleteById,e.modelName="Post",e.comments=function(){var a=c.get("Comment"),b=a["::get::Post::comments"];return b.apply(e,arguments)},e.comments.count=function(){var a=c.get("Comment"),b=a["::count::Post::comments"];return b.apply(e,arguments)},e.comments.create=function(){var a=c.get("Comment"),b=a["::create::Post::comments"];return b.apply(e,arguments)},e.comments.destroyAll=function(){var a=c.get("Comment"),b=a["::delete::Post::comments"];return b.apply(e,arguments)},e.comments.destroyById=function(){var a=c.get("Comment"),b=a["::destroyById::Post::comments"];return b.apply(e,arguments)},e.comments.findById=function(){var a=c.get("Comment"),b=a["::findById::Post::comments"];return b.apply(e,arguments)},e.comments.updateById=function(){var a=c.get("Comment"),b=a["::updateById::Post::comments"];return b.apply(e,arguments)},e.user=function(){var a=c.get("User"),b=a["::get::Post::user"];return b.apply(e,arguments)},e}]),f.factory("Comment",["LoopBackResource","LoopBackAuth","$injector",function(a,b,c){var e=a(d+"/Comments/:id",{id:"@id"},{prototype$__get__post:{url:d+"/Comments/:id/post",method:"GET"},prototype$__get__user:{url:d+"/Comments/:id/user",method:"GET"},create:{url:d+"/Comments",method:"POST"},upsert:{url:d+"/Comments",method:"PUT"},exists:{url:d+"/Comments/:id/exists",method:"GET"},findById:{url:d+"/Comments/:id",method:"GET"},find:{isArray:!0,url:d+"/Comments",method:"GET"},findOne:{url:d+"/Comments/findOne",method:"GET"},updateAll:{url:d+"/Comments/update",method:"POST"},deleteById:{url:d+"/Comments/:id",method:"DELETE"},count:{url:d+"/Comments/count",method:"GET"},prototype$updateAttributes:{url:d+"/Comments/:id",method:"PUT"},"::findById::Post::comments":{url:d+"/Posts/:id/comments/:fk",method:"GET"},"::destroyById::Post::comments":{url:d+"/Posts/:id/comments/:fk",method:"DELETE"},"::updateById::Post::comments":{url:d+"/Posts/:id/comments/:fk",method:"PUT"},"::get::Post::comments":{isArray:!0,url:d+"/Posts/:id/comments",method:"GET"},"::create::Post::comments":{url:d+"/Posts/:id/comments",method:"POST"},"::delete::Post::comments":{url:d+"/Posts/:id/comments",method:"DELETE"},"::count::Post::comments":{url:d+"/Posts/:id/comments/count",method:"GET"},"::findById::user::comments":{url:d+"/users/:id/comments/:fk",method:"GET"},"::destroyById::user::comments":{url:d+"/users/:id/comments/:fk",method:"DELETE"},"::updateById::user::comments":{url:d+"/users/:id/comments/:fk",method:"PUT"},"::get::user::comments":{isArray:!0,url:d+"/users/:id/comments",method:"GET"},"::create::user::comments":{url:d+"/users/:id/comments",method:"POST"},"::delete::user::comments":{url:d+"/users/:id/comments",method:"DELETE"},"::count::user::comments":{url:d+"/users/:id/comments/count",method:"GET"}});return e.updateOrCreate=e.upsert,e.update=e.updateAll,e.destroyById=e.deleteById,e.removeById=e.deleteById,e.modelName="Comment",e.post=function(){var a=c.get("Post"),b=a["::get::Comment::post"];return b.apply(e,arguments)},e.user=function(){var a=c.get("User"),b=a["::get::Comment::user"];return b.apply(e,arguments)},e}]),f.factory("User",["LoopBackResource","LoopBackAuth","$injector",function(a,b,c){var e=a(d+"/users/:id",{id:"@id"},{login:{params:{include:"user"},interceptor:{response:function(a){var c=a.data;return b.setUser(c.id,c.userId,c.user),b.rememberMe=a.config.params.rememberMe!==!1,b.save(),a.resource}},url:d+"/users/login",method:"POST"},logout:{interceptor:{response:function(a){return b.clearUser(),b.clearStorage(),a.resource}},url:d+"/users/logout",method:"POST"},confirm:{url:d+"/users/confirm",method:"GET"},resetPassword:{url:d+"/users/reset",method:"POST"},prototype$__findById__accessTokens:{url:d+"/users/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{url:d+"/users/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{url:d+"/users/:id/accessTokens/:fk",method:"PUT"},prototype$__findById__posts:{url:d+"/users/:id/posts/:fk",method:"GET"},prototype$__destroyById__posts:{url:d+"/users/:id/posts/:fk",method:"DELETE"},prototype$__updateById__posts:{url:d+"/users/:id/posts/:fk",method:"PUT"},prototype$__findById__comments:{url:d+"/users/:id/comments/:fk",method:"GET"},prototype$__destroyById__comments:{url:d+"/users/:id/comments/:fk",method:"DELETE"},prototype$__updateById__comments:{url:d+"/users/:id/comments/:fk",method:"PUT"},prototype$__get__accessTokens:{isArray:!0,url:d+"/users/:id/accessTokens",method:"GET"},prototype$__create__accessTokens:{url:d+"/users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:d+"/users/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:d+"/users/:id/accessTokens/count",method:"GET"},prototype$__get__posts:{isArray:!0,url:d+"/users/:id/posts",method:"GET"},prototype$__create__posts:{url:d+"/users/:id/posts",method:"POST"},prototype$__delete__posts:{url:d+"/users/:id/posts",method:"DELETE"},prototype$__count__posts:{url:d+"/users/:id/posts/count",method:"GET"},prototype$__get__comments:{isArray:!0,url:d+"/users/:id/comments",method:"GET"},prototype$__create__comments:{url:d+"/users/:id/comments",method:"POST"},prototype$__delete__comments:{url:d+"/users/:id/comments",method:"DELETE"},prototype$__count__comments:{url:d+"/users/:id/comments/count",method:"GET"},create:{url:d+"/users",method:"POST"},upsert:{url:d+"/users",method:"PUT"},exists:{url:d+"/users/:id/exists",method:"GET"},findById:{url:d+"/users/:id",method:"GET"},find:{isArray:!0,url:d+"/users",method:"GET"},findOne:{url:d+"/users/findOne",method:"GET"},updateAll:{url:d+"/users/update",method:"POST"},deleteById:{url:d+"/users/:id",method:"DELETE"},count:{url:d+"/users/count",method:"GET"},prototype$updateAttributes:{url:d+"/users/:id",method:"PUT"},"::get::Post::user":{url:d+"/Posts/:id/user",method:"GET"},"::get::Comment::user":{url:d+"/Comments/:id/user",method:"GET"},getCurrent:{url:d+"/users/:id",method:"GET",params:{id:function(){var a=b.currentUserId;return null==a&&(a="__anonymous__"),a}},interceptor:{response:function(a){return b.currentUserData=a.data,a.resource}},__isGetCurrentUser__:!0}});return e.updateOrCreate=e.upsert,e.update=e.updateAll,e.destroyById=e.deleteById,e.removeById=e.deleteById,e.getCachedCurrent=function(){var a=b.currentUserData;return a?new e(a):null},e.isAuthenticated=function(){return null!=this.getCurrentId()},e.getCurrentId=function(){return b.currentUserId},e.modelName="User",e.posts=function(){var a=c.get("Post"),b=a["::get::user::posts"];return b.apply(e,arguments)},e.posts.count=function(){var a=c.get("Post"),b=a["::count::user::posts"];return b.apply(e,arguments)},e.posts.create=function(){var a=c.get("Post"),b=a["::create::user::posts"];return b.apply(e,arguments)},e.posts.destroyAll=function(){var a=c.get("Post"),b=a["::delete::user::posts"];return b.apply(e,arguments)},e.posts.destroyById=function(){var a=c.get("Post"),b=a["::destroyById::user::posts"];return b.apply(e,arguments)},e.posts.findById=function(){var a=c.get("Post"),b=a["::findById::user::posts"];return b.apply(e,arguments)},e.posts.updateById=function(){var a=c.get("Post"),b=a["::updateById::user::posts"];return b.apply(e,arguments)},e.comments=function(){var a=c.get("Comment"),b=a["::get::user::comments"];return b.apply(e,arguments)},e.comments.count=function(){var a=c.get("Comment"),b=a["::count::user::comments"];return b.apply(e,arguments)},e.comments.create=function(){var a=c.get("Comment"),b=a["::create::user::comments"];return b.apply(e,arguments)},e.comments.destroyAll=function(){var a=c.get("Comment"),b=a["::delete::user::comments"];return b.apply(e,arguments)},e.comments.destroyById=function(){var a=c.get("Comment"),b=a["::destroyById::user::comments"];return b.apply(e,arguments)},e.comments.findById=function(){var a=c.get("Comment"),b=a["::findById::user::comments"];return b.apply(e,arguments)},e.comments.updateById=function(){var a=c.get("Comment"),b=a["::updateById::user::comments"];return b.apply(e,arguments)},e}]),f.factory("LoopBackAuth",function(){function a(){var a=this;e.forEach(function(b){a[b]=d(b)}),this.rememberMe=c,this.currentUserData=null}function b(a,b,c){var d=f+b;null==c&&(c=""),a[d]=c}function d(a){var b=f+a;return localStorage[b]||sessionStorage[b]||null}var e=["accessTokenId","currentUserId"],f="$LoopBack$";return a.prototype.save=function(){var a=this,c=this.rememberMe?localStorage:sessionStorage;e.forEach(function(d){b(c,d,a[d])})},a.prototype.setUser=function(a,b,c){this.accessTokenId=a,this.currentUserId=b,this.currentUserData=c},a.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},a.prototype.clearStorage=function(){e.forEach(function(a){b(sessionStorage,a,null),b(localStorage,a,null)})},new a}).config(["$httpProvider",function(a){a.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function(a,b){return{request:function(f){if(f.url.substr(0,d.length)!==d)return f;if(b.accessTokenId)f.headers[e]=b.accessTokenId;else if(f.__isGetCurrentUser__){var g={body:{error:{status:401}},status:401,config:f,headers:function(){return c}};return a.reject(g)}return f||a.when(f)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(a){e=a},this.setUrlBase=function(a){d=a},this.$get=["$resource",function(a){return function(b,c,d){var e=a(b,c,d);return e.prototype.$save=function(a,b){var c=e.upsert.call(this,{},this,a,b);return c.$promise||c},e}}]})}(window,window.angular),function(){"use strict";function a(a){return{getCurrentUser:function(){var b=localStorage.getItem("$LoopBack$currentUserId")?localStorage.getItem("$LoopBack$currentUserId"):"";return a.isLoggedIn=b?!0:!1,b}}}angular.module("blogApp.services.utils",[]).factory("helpers",a),a.$inject=["$rootScope"]}(),function(){"use strict";angular.module("blogApp",["blogApp.core.config","blogApp.core.routes","blogApp.controllers.postCtrls","blogApp.controllers.userCtrls","blogApp.controllers.commentCtrls","blogApp.services.utils","blogApp.directives","ui.bootstrap"])}();